[Digital Communications: OFDM](https://www.youtube.com/watch?v=LZrCiQhnMsE)
[GEL7014 - Module 4.13 - OFDM implementation](https://www.youtube.com/watch?v=oOOS9xDXLaU)

1. OFDM much less complex to deal with ISI (inter-symbol-interference) caused by dispersion.
2. dispersion changes amplitude and phase of the signal, but not the shape of the signal or frequency content.

## One-tap equalizer
3. Because amplitude and phase change by dispersion, but they contain useful information, we need to estimate and compensate for these changes.
    Estimation is done by sending a known signal (pilot) and comparing it to the received signal.  This yields us the one-tap equalizer coefficients.
    Multiplying incoming data signals by the conjugate of the equalizer coefficients compensates for the amplitude and phase changes and restores the original signal.

## Pilot signals
1. reserving a few subcarriers for pilot signals.

4. Truncating sinusoid signals in the time domain causes spectral leakage.  Instead of a delta-function, you get a delta function convolved with a sinc function.  So it no longer has zero width in the frequency domain.
    The solution is to use a discrete time function, so sampling the signal in the time domain (using K samples).  This yields zero width amplitude in the discrete frequency domain, which is what we want.
5. Cyclic prefix: samples in the time domain experience smearing from previous samples.  The problem with cutting out a piece of the spectrum is that the oldest samples don't experience the smearing.  The solution is to prefix a cyclic prefix to the signal, which is a copy of the last samples of the signal.  This way, the oldest samples experience the same smearing as the newest samples.  It provides a guard interval.  The guard band must be longer than the channel impulse response.
6. The DFT transform works on K-samples. 
7. Orthogonal sinusoids
    - must be separated by an integer number of cycles dOhm = 2*pi/T
    - remain orthogonal even when their amplitude and phase are changed by the channel
8. OFDM modulation
    - each subcarrier is modulated by a QAM signal
    - the K-subcarriers are added together, then the cyclic prefix is added to the signal and transmitted.

## OFDM symbol generation
It's an inverse DFT operation. Each sample x[n] of the OFDM symbol is generated by summing the K subcarriers, each modulated by a signal X[k]:
$$x[n]=\frac{1}{\sqrt{K}}\sum_{k=-\frac{K}{2}}^{\frac{K}{2}-1}X[k]e^{j2\Pi\frac{k}{K}n}$$
1/sqrt(K) is the normalization factor.  To make sure that each sample has unit energy.
IFFT can be used when K is a power of 2.

### OFDM demodulation
1. Remove the cyclic prefix
2. Perform the DFT operation (FFT) on the K samples

### OFDM in practice
1. Divide data into bits. 
    * Bit value 0 is mapped to -1, bit value 1 is mapped to 1 : NRZ (non-return-to-zero) encoding
2. Bits are mapped to complex QAM symbols
4. Subcarriers are summed together into a complex signal
5. Cyclic prefix is added
6. Complex signal is converted to a time-domain signal
7. Signal is transmitted
8. Signal is received
9. Time signal is converted to a complex signal
10. Cyclic prefix is removed
11. DFT is performed
12. QAM symbols are demapped to bits

### OFDM problems
1. Peak-to-average power ratio (PAPR) -> large dynamic range needed
    - OFDM signal is the sum of many sinusoids.  The sum of sinusoids can be much larger than the amplitude of the individual sinusoids.  This can cause clipping in the transmitter.
    - Solution: clipping and filtering, but this causes distortion.

### OFDM advantages
1. OFDM is robust to ISI caused by multipath propagation
2. Less complex than equalization
3. Bandwidth efficiency
4. Robust to narrowband interference

### OFDM disadvantages
1. Sensitivity to frequency offset
2. Sensitivity to phase noise
3. Sensitivity to time synchronization
4. Sensitivity to carrier frequency offset
5. Large PAPR